# å›¾ç‰‡å‹ç¼©æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³• 1: ä½¿ç”¨æœ¬åœ°å‹ç¼©è„šæœ¬ï¼ˆæ¨èï¼‰

1. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

2. **è¿è¡Œå‹ç¼©è„šæœ¬**
   ```bash
   npm run compress
   ```

   æˆ–è€…ç›´æ¥è¿è¡Œï¼š
   ```bash
   node compress-images.js
   ```

3. **é…ç½®é€‰é¡¹**
   
   ç¼–è¾‘ `compress-images.js` æ–‡ä»¶ä¸­çš„ `CONFIG` å¯¹è±¡ï¼š
   ```javascript
   const CONFIG = {
       quality: 85,           // å‹ç¼©è´¨é‡ (0-100)
       overwrite: false,      // false = åˆ›å»ºå¤‡ä»½ï¼Œtrue = ç›´æ¥è¦†ç›–
       folders: ['photos', 'comics'],  // è¦å‹ç¼©çš„æ–‡ä»¶å¤¹
       maxSizeMB: 0.5         // åªå‹ç¼©å¤§äºæ­¤å¤§å°çš„æ–‡ä»¶
   };
   ```

### æ–¹æ³• 2: ä½¿ç”¨ TinyPNG APIï¼ˆéœ€è¦ API Keyï¼‰

1. **è·å– API Key**
   - è®¿é—® https://tinypng.com/developers
   - æ³¨å†Œå¹¶è·å– API Key
   - æ¯æœˆå‰ 500 æ¬¡å‹ç¼©å…è´¹

2. **å®‰è£… TinyPNG CLI**
   ```bash
   npm install -g tinypng-cli
   ```

3. **è®¾ç½® API Key**
   ```bash
   tinypng-cli --key YOUR_API_KEY
   ```

4. **å‹ç¼©å›¾ç‰‡**
   ```bash
   tinypng-cli photos/*.png
   tinypng-cli comics/**/*.png
   ```

---

## ğŸ“Š å‹ç¼©æ•ˆæœå¯¹æ¯”

ä½¿ç”¨ `sharp` åº“å‹ç¼©é€šå¸¸å¯ä»¥ï¼š
- **PNG**: å‡å°‘ 60-80% æ–‡ä»¶å¤§å°
- **JPG**: å‡å°‘ 40-60% æ–‡ä»¶å¤§å°
- **è´¨é‡**: è§†è§‰ä¸Šå‡ ä¹æ— å·®å¼‚

---

## âš™ï¸ é…ç½®è¯´æ˜

### å‹ç¼©è´¨é‡è®¾ç½®

- `quality: 90-100` - é«˜è´¨é‡ï¼Œæ–‡ä»¶è¾ƒå¤§
- `quality: 80-90` - **æ¨è**ï¼Œå¹³è¡¡è´¨é‡å’Œå¤§å°
- `quality: 70-80` - è¾ƒå°æ–‡ä»¶ï¼Œè´¨é‡ç•¥æœ‰ä¸‹é™
- `quality: < 70` - ä¸æ¨èï¼Œè´¨é‡æ˜æ˜¾ä¸‹é™

### å®‰å…¨æ¨¡å¼

é»˜è®¤ `overwrite: false` ä¼šï¼š
1. åˆ›å»ºå¤‡ä»½æ–‡ä»¶ (`backup_*.png`)
2. åˆ›å»ºå‹ç¼©æ–‡ä»¶ (`compressed_*.png`)
3. å¦‚æœå‹ç¼©åæ›´å°ï¼Œæ›¿æ¢åŸæ–‡ä»¶
4. å¦‚æœå‹ç¼©åæ›´å¤§ï¼Œä¿ç•™åŸæ–‡ä»¶

---

## ğŸ”§ é«˜çº§ç”¨æ³•

### åªå‹ç¼©ç‰¹å®šæ–‡ä»¶å¤¹

ä¿®æ”¹ `compress-images.js`:
```javascript
folders: ['photos']  // åªå‹ç¼© photos æ–‡ä»¶å¤¹
```

### æ‰¹é‡å¤„ç†å­æ–‡ä»¶å¤¹

è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç† `comics` æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰å­æ–‡ä»¶å¤¹ã€‚

### æ£€æŸ¥å‹ç¼©ç»“æœ

è¿è¡Œåä¼šæ˜¾ç¤ºï¼š
- æ€»æ–‡ä»¶æ•°
- å·²å‹ç¼©æ•°é‡
- èŠ‚çœçš„ç©ºé—´
- å‹ç¼©ç‡

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½é‡è¦**: é¦–æ¬¡è¿è¡Œå»ºè®®ä½¿ç”¨ `overwrite: false`
2. **æµ‹è¯•è´¨é‡**: å‹ç¼©åæ£€æŸ¥å›¾ç‰‡è´¨é‡æ˜¯å¦æ»¡æ„
3. **åˆ†æ‰¹å¤„ç†**: å¦‚æœå›¾ç‰‡å¾ˆå¤šï¼Œå¯ä»¥åˆ†æ‰¹å¤„ç†
4. **Git æäº¤**: å‹ç¼©åè®°å¾—æäº¤åˆ° Git

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: å‹ç¼©åå›¾ç‰‡è´¨é‡ä¸‹é™ï¼Ÿ
A: æé«˜ `quality` å€¼ï¼ˆå¦‚ 90ï¼‰ï¼Œæˆ–ä½¿ç”¨ `overwrite: false` å…ˆæµ‹è¯•

### Q: å‹ç¼©é€Ÿåº¦æ…¢ï¼Ÿ
A: æ­£å¸¸ï¼Œå¤§é‡å›¾ç‰‡éœ€è¦æ—¶é—´ã€‚å¯ä»¥åˆ†æ‰¹å¤„ç†

### Q: æŸäº›å›¾ç‰‡å‹ç¼©å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æŸåï¼Œæˆ–å°è¯•å•ç‹¬å‹ç¼©

### Q: æƒ³æ¢å¤åŸæ–‡ä»¶ï¼Ÿ
A: å¦‚æœä½¿ç”¨äº†å¤‡ä»½æ¨¡å¼ï¼Œå¤‡ä»½æ–‡ä»¶åœ¨ `backup_*.png`

---

## ğŸ“ æ¨èå·¥ä½œæµç¨‹

1. **é¦–æ¬¡å‹ç¼©**:
   ```bash
   # ä½¿ç”¨å¤‡ä»½æ¨¡å¼
   # ç¼–è¾‘ compress-images.js: overwrite: false
   npm run compress
   ```

2. **æ£€æŸ¥ç»“æœ**:
   - æŸ¥çœ‹å‹ç¼©ç»Ÿè®¡
   - æ£€æŸ¥å‡ å¼ å›¾ç‰‡çš„è´¨é‡
   - ç¡®è®¤æ–‡ä»¶å¤§å°å‡å°‘

3. **å¦‚æœæ»¡æ„**:
   ```bash
   # åˆ é™¤å¤‡ä»½æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
   # ç„¶åæäº¤åˆ° Git
   git add photos/ comics/
   git commit -m "Compress images to improve loading speed"
   git push
   ```

4. **å¦‚æœè´¨é‡ä¸æ»¡æ„**:
   - æé«˜ `quality` å€¼
   - é‡æ–°è¿è¡Œå‹ç¼©

---

**æç¤º**: å‹ç¼©åç½‘ç«™åŠ è½½é€Ÿåº¦ä¼šæ˜¾è‘—æå‡ï¼ğŸš€

